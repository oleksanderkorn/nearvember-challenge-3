{"version":3,"sources":["ErrorPupop.jsx","HelloWorld.jsx","App.js","index.js","config.js"],"names":["ErrorPopup","error","callback","closeModal","appear","show","as","Fragment","className","onClose","Child","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","Overlay","aria-hidden","Title","type","onClick","HelloWorld","currentUser","contract","useState","isLoading","setIsLoading","name","setName","message","setMessage","setError","useEffect","get_response","accountId","then","text","console","log","isValidName","disabled","hello_world","err","value","placeholder","onChange","event","target","App","nearConfig","wallet","src","alt","signOut","window","location","replace","origin","pathname","requestSignIn","contractName","a","getConfig","process","nearAPI","deps","keyStore","BrowserLocalStorageKeyStore","near","walletConnection","provider","providers","JsonRpcProvider","nodeUrl","getAccountId","account","state","amount","balance","viewMethods","changeMethods","sender","transactionByHash","txHash","txStatus","nearInitPromise","initContract","ReactDOM","render","document","getElementById","CONTRACT_NAME","module","exports","env","networkId","walletUrl","helperUrl","Error"],"mappings":"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","file":"static/js/main.4e00baad.chunk.js","sourcesContent":["import { Dialog, Transition } from \"@headlessui/react\";\nimport { Fragment } from \"react\";\n\nexport default function ErrorPopup({ error, callback }) {\n  function closeModal() {\n    callback();\n  }\n\n  return (\n    <>\n      <Transition appear show={error !== \"\"} as={Fragment}>\n        <Dialog\n          as=\"div\"\n          className=\"fixed inset-0 z-10 overflow-y-auto\"\n          onClose={closeModal}\n        >\n          <div className=\"min-h-screen px-4 text-center\">\n            <Transition.Child\n              as={Fragment}\n              enter=\"ease-out duration-300\"\n              enterFrom=\"opacity-0\"\n              enterTo=\"opacity-100\"\n              leave=\"ease-in duration-200\"\n              leaveFrom=\"opacity-100\"\n              leaveTo=\"opacity-0\"\n            >\n              <Dialog.Overlay className=\"fixed inset-0\" />\n            </Transition.Child>\n\n            {/* This element is to trick the browser into centering the modal contents. */}\n            <span\n              className=\"inline-block h-screen align-middle\"\n              aria-hidden=\"true\"\n            >\n              &#8203;\n            </span>\n            <Transition.Child\n              as={Fragment}\n              enter=\"ease-out duration-300\"\n              enterFrom=\"opacity-0 scale-95\"\n              enterTo=\"opacity-100 scale-100\"\n              leave=\"ease-in duration-200\"\n              leaveFrom=\"opacity-100 scale-100\"\n              leaveTo=\"opacity-0 scale-95\"\n            >\n              <div className=\"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl\">\n                <Dialog.Title\n                  as=\"h3\"\n                  className=\"text-lg font-medium leading-6 text-gray-900\"\n                >\n                  Opps, something went wrong\n                </Dialog.Title>\n                <div className=\"mt-2\">\n                  <p className=\"text-sm text-gray-500\">{error}</p>\n                </div>\n\n                <div className=\"mt-4\">\n                  <button\n                    type=\"button\"\n                    className=\"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500\"\n                    onClick={closeModal}\n                  >\n                    Close\n                  </button>\n                </div>\n              </div>\n            </Transition.Child>\n          </div>\n        </Dialog>\n      </Transition>\n    </>\n  );\n}\n","import { useEffect, useState } from \"react\";\nimport ErrorPopup from \"./ErrorPupop\";\n// import * as googleTTS from \"google-tts-api\";\n\nconst HelloWorld = ({ currentUser, contract }) => {\n  const [isLoading, setIsLoading] = useState(false);\n  const [name, setName] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [error, setError] = useState(\"\");\n\n  useEffect(() => {\n    setIsLoading(true);\n    contract.get_response({ accountId: currentUser.accountId }).then((text) => {\n      console.log(text);\n      setMessage(text);\n    });\n    setIsLoading(false);\n  }, [isLoading, contract, currentUser.accountId]);\n\n  // useEffect(() => {\n  //   if (message !== \"\") {\n  //     setIsLoading(true);\n  //     const url = googleTTS.getAudioUrl(message, {\n  //       lang: \"en\",\n  //       slow: false,\n  //       host: \"https://translate.google.com\",\n  //     });\n  //     setIsLoading(false);\n  //     new Audio(url).play();\n  //   }\n  // }, [message]);\n\n  const isValidName = () => name !== \"\";\n\n  const sendMessage = () => {\n    setIsLoading(true);\n    if (isValidName) {\n      contract.hello_world({ name }).then(\n        () => {\n          setIsLoading(false);\n        },\n        (err) => {\n          setError(`${err}`);\n          setIsLoading(false);\n        }\n      );\n    }\n  };\n\n  return (\n    <div className=\"md:container md:mx-auto\">\n      {isLoading ? (\n        <div className=\"mt-4 mx-auto loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-20 w-20\"></div>\n      ) : (\n        <div className=\"mt-4 h-20 w-20\"></div>\n      )}\n      {message && (\n        <div className=\"p-8\">\n          <div className=\"uppercase tracking-wide text-sm text-indigo-500 font-semibold\">\n            ZOLTAR SPEAKS:\n          </div>\n          <p className=\"mt-2 text-gray-500\">{message}</p>\n        </div>\n      )}\n      <div className=\"grid grid-cols-1 gap-4\">\n        <div>\n          <div className=\"p-8\">\n            <div className=\"uppercase tracking-wide text-sm text-indigo-500 font-semibold\">\n              What's Your Name?!\n            </div>\n            <div className=\"grid grid-cols-2 gap-4\">\n              <button\n                disabled={!isValidName()}\n                className=\"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded\"\n                onClick={sendMessage}\n              >\n                Send\n              </button>\n              <input\n                type=\"text\"\n                className=\"border-2 p-1 border-green-500 rounded\"\n                value={name}\n                placeholder=\"Enter Your Name\"\n                onChange={(event) => setName(event.target.value)}\n              />\n            </div>\n            <ErrorPopup error={error} callback={() => setError(\"\")} />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default HelloWorld;\n","import \"regenerator-runtime/runtime\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport HelloWorld from \"./HelloWorld\";\n\nconst App = ({ contract, currentUser, nearConfig, wallet }) => {\n  const signIn = () => {\n    wallet.requestSignIn(nearConfig.contractName, \"NEAR Hello Chuck App\");\n  };\n\n  const signOut = () => {\n    wallet.signOut();\n    window.location.replace(window.location.origin + window.location.pathname);\n  };\n  return (\n    <>\n      <div className=\"p-6 max-w-sm mx-auto bg-white rounded-xl shadow-md flex items-center space-x-4\">\n        <div className=\"flex-shrink-0\">\n          <img\n            className=\"h-12 w-24\"\n            src=\"https://docs.near.org/img/near_logo.svg\"\n            alt=\"NEAR Logo\"\n          />\n          {currentUser ? (\n            <button\n              className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\"\n              onClick={signOut}\n            >\n              Log out\n            </button>\n          ) : (\n            <button\n              className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\"\n              onClick={signIn}\n            >\n              Log in\n            </button>\n          )}\n        </div>\n        <div>\n          <div className=\"text-xl font-medium text-black\">Near Hello Chuck</div>\n          {currentUser ? (\n            <div>\n              <p className=\"text-gray-500\">\n                Account ID: {currentUser.accountId}{\" \"}\n              </p>\n            </div>\n          ) : (\n            <div>\n              <p className=\"text-gray-500\">Sign In To Use The App</p>\n            </div>\n          )}\n        </div>\n      </div>\n      {currentUser && (\n        <HelloWorld currentUser={currentUser} contract={contract} />\n      )}\n    </>\n  );\n};\n\nApp.propTypes = {\n  contract: PropTypes.shape({\n    get_response: PropTypes.func.isRequired,\n    hello_world: PropTypes.func.isRequired,\n  }).isRequired,\n  currentUser: PropTypes.shape({\n    accountId: PropTypes.string.isRequired,\n    balance: PropTypes.string.isRequired,\n  }),\n  nearConfig: PropTypes.shape({\n    contractName: PropTypes.string.isRequired,\n  }).isRequired,\n  wallet: PropTypes.shape({\n    requestSignIn: PropTypes.func.isRequired,\n    signOut: PropTypes.func.isRequired,\n  }).isRequired,\n};\n\nexport default App;\n","// src/index.js\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\nimport getConfig from \"./config.js\";\nimport * as nearAPI from \"near-api-js\";\nimport { providers } from \"near-api-js\";\n\n// Initializing contract\nasync function initContract() {\n  const nearConfig = getConfig(process.env.NODE_ENV || \"testnet\");\n\n  // Initializing connection to the NEAR TestNet\n  const near = await nearAPI.connect({\n    deps: {\n      keyStore: new nearAPI.keyStores.BrowserLocalStorageKeyStore(),\n    },\n    ...nearConfig,\n  });\n\n  // Needed to access wallet\n  const walletConnection = new nearAPI.WalletConnection(near);\n\n  const provider = new providers.JsonRpcProvider(nearConfig.nodeUrl);\n\n  // Load in account data\n  let currentUser;\n  if (walletConnection.getAccountId()) {\n    currentUser = {\n      accountId: walletConnection.getAccountId(),\n      balance: (await walletConnection.account().state()).amount,\n    };\n  }\n\n  // Initializing our contract APIs by contract name and configuration\n  const contract = await new nearAPI.Contract(\n    walletConnection.account(),\n    nearConfig.contractName,\n    {\n      viewMethods: [\"get_response\"],\n      // Change methods can modify the state, but you don't receive the returned value when called\n      changeMethods: [\"hello_world\"],\n      // Sender is the account ID to initialize transactions.\n      // getAccountId() will return empty string if user is still unauthorized\n      sender: walletConnection.getAccountId(),\n    }\n  );\n\n  const transactionByHash = async (txHash) => {\n    return await provider.txStatus(txHash, currentUser.accountId);\n  };\n\n  return {\n    contract,\n    currentUser,\n    nearConfig,\n    walletConnection,\n    transactionByHash,\n  };\n}\n\nwindow.nearInitPromise = initContract().then(\n  ({\n    contract,\n    currentUser,\n    nearConfig,\n    walletConnection,\n    transactionByHash,\n  }) => {\n    ReactDOM.render(\n      <App\n        contract={contract}\n        currentUser={currentUser}\n        nearConfig={nearConfig}\n        wallet={walletConnection}\n        transactionByHash={transactionByHash}\n      />,\n      document.getElementById(\"root\")\n    );\n  }\n);\n","const CONTRACT_NAME = process.env.CONTRACT_NAME || \"challenge3.lkskrnk.testnet\";\n\nfunction getConfig(env) {\n  switch (env) {\n    case \"mainnet\":\n      return {\n        networkId: \"mainnet\",\n        nodeUrl: \"https://rpc.mainnet.near.org\",\n        contractName: CONTRACT_NAME,\n        walletUrl: \"https://wallet.near.org\",\n        helperUrl: \"https://helper.mainnet.near.org\",\n      };\n    // This is an example app so production is set to testnet.\n    // You can move production to mainnet if that is applicable.\n    case \"production\":\n    case \"development\":\n    case \"testnet\":\n      return {\n        networkId: \"testnet\",\n        nodeUrl: \"https://rpc.testnet.near.org\",\n        contractName: CONTRACT_NAME,\n        walletUrl: \"https://wallet.testnet.near.org\",\n        helperUrl: \"https://helper.testnet.near.org\",\n      };\n    default:\n      throw Error(\n        `Unconfigured environment '${env}'. Can be configured in src/config.js.`\n      );\n  }\n}\n\nmodule.exports = getConfig;\n"],"sourceRoot":""}